<?php

/**
 * sfGuardPermission
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    cronos-doctrine
 * @subpackage model
 * @author     Your name here
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class sfGuardPermission extends PluginsfGuardPermission
{
    
    
    public function __toString() {
        return $this->getName();
    }
    
    static public $status = array(
        0 => 'Inactivo',
        1 => 'Activo'

    );
    
      static public $detalles = array(
        1 => 'Empresa - Franquincia',
        2 => 'Empresa - Datos generales',
        3 => 'Empresa - Personal',
        4 => 'Ubicación - Provincia',
        5 => 'Ubicación - provincia/Estado',
        6 => 'Ubicación - distrito',
        7 => 'Ubicación - corregimiento',
        8 => 'Mantenimiento - Tipo documento',
        9 => 'Mantenimiento - IGV',
        10 => 'Mantenimiento - Moneda',
        11 => 'Mantenimiento - Forma de pago',
        12 => 'Mantenimiento - Perfil',
        14 => 'Catálago - Categoría',
        19 => 'Catálago - Condiciones',
        20 => 'Catálago - Producto',
        24 => 'Dep.Compra - Rep.Por proveedor',
        26 => 'Proveedor - Proveedores',
        27 => 'Dep.Ventas - Ventas',
        28 => 'Dep.Ventas - Rep.Por fecha',
        29 => 'Dep.Ventas - Rep.Por proveedor',
        30 => 'Dep.Ventas - Rep.Por ubicación'

    );
     
     
     
    
    public function getsfGuardPermission(){
        $q = Doctrine_Query::create()
            -> from('sfGuardPermission c')
            ->where('c.status = ?', '1')
            ->orderBy('name ASC');
       return $q->execute();
    }
    
    public function getsfGuardPermissions(){
        $q = Doctrine_Query::create()
            -> from('sfGuardPermission c')
            ->orderBy('name ASC');
       return $q->execute();
    }
    
    public function getsfGuardPermissionsProductos(){
        $q = Doctrine_Query::create()
            -> from('sfGuardPermission c')
            ->orderBy('name ASC');
       return $q;
    }
    
    
      public function getsfGuardPermissionGrupo(){
        $q = Doctrine_Query::create()
            -> from('sfGuardPermission c')
            ->where('c.status = ?', '1')
            ->groupBy('c.mancheta')
            ->orderBy('c.mancheta ASC');
       return $q->execute();
    }
    
      public function getsfGuardPermissionAlimento($grupo){
        $q = Doctrine_Query::create()
            -> from('sfGuardPermission c')
            ->where('c.status = ?', '1')
            //->where('c.name=?',$gruopo)
            ->orderBy('name ASC');
       return $q->execute();
    }
    
    
    
    
    public function getsfGuardPermissionSlug($slug){
        $q = Doctrine_Query::create()
            -> from('sfGuardPermission c')
            ->where('c.slug = ?', $slug);
       return $q->fetchOne();
    }


    public function getsfGuardPermissionActive(){
        $q = Doctrine_Query::create()
            -> from('Producto p')  
            -> where('p.marca_id= ?', $this->getId())
            -> orderBy('orden ASC');
       return $q;
    }
    
     public function getsfGuardPermissionPremium(){
        $q = Doctrine_Query::create()
            -> from('sfGuardPermission p')  
            -> where('p.mancheta like "%Alimento Premium%"')
            -> orderBy('orden ASC');
       return $q;
    }
    

       public function  setDetalles($data) {
                    $data = serialize($data);
                    $this->_set('detalles', $data);
       }

      
      public function  getDetalles(){
             return unserialize($this->_get('detalles'));
            
      }
      
      
    
}
